
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ºä½•è¯´ AbortController æ˜¯å‰ç«¯ä¸€æŠŠåˆ©å‰‘</title>
    <link rel="shortcut icon" href="code.svg" type="image/x-icon" />
    <link rel="stylesheet" href="css/article.css">
    <link rel="stylesheet" href="css/prism.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap">
</head>
<body class="line-numbers">
    <nav class="nav-bar">
        <a href="index.html" class="nav-home">é¦–é¡µ</a>
    </nav>
    <article class="article-container">
        <!-- å·¦ä¾§ç›®å½• -->
        <aside class="article-toc">
            <div class="toc-header">
                <div class="toc-title">
                    <i class="fas fa-list"></i>
                    <span>æ–‡ç« ç›®å½•</span>
                </div>
            </div>
            <div class="toc-content"></div>
        </aside>

        <!-- ä¸­é—´æ–‡ç« ä¸»ä½“ -->
        <main class="article-main">
            <header class="article-header">
                <h1>ä¸ºä½•è¯´ AbortController æ˜¯å‰ç«¯ä¸€æŠŠåˆ©å‰‘</h1>
                <div class="article-meta">
                    
                    <time datetime="Sun Mar 09 2025 02:12:26 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">
                        <i class="far fa-calendar-alt"></i>
                        2025å¹´3æœˆ9æ—¥
                    </time>
                    
                    <div class="article-tags">
                        <span class="tag"><i class="fas fa-tag"></i>AbortController</span>
                    </div>
                    
                </div>
            </header>
            <div class="article-content">
                <h2>1. é€šè¿‡ AbortController æå‰ç»ˆæ­¢ fetch</h2>
<p>é¦–å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼Œå…¶ä½¿ç”¨ AbortController æ¥å®ç°å¯ä»¥æå‰ä¸­æ­¢çš„ fetchï¼š</p>
<pre><code class="language-js">fetchButton.onclick = async () =&gt; {
  const controller = new AbortController();
  // æ·»åŠ å–æ¶ˆæŒ‰é’®
  abortButton.onclick = () =&gt; controller.abort();
  try {
    const r = await fetch(&quot;/json&quot;, { signal: controller.signal });
    const json = await r.json();
    // è¿™é‡Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘
  } catch (e) {
    const isUserAbort = e.name === &quot;AbortError&quot;;
    // å¦‚æœæ˜¯ AbortController å–æ¶ˆçš„åˆ™æ˜¯ AbortErrorï¼ˆä¸€ç§ DOMExceptionï¼‰
  }
};
</code></pre>
<p>ä¸Šé¢ç¤ºä¾‹å±•ç¤ºäº†åœ¨ <code>AbortController</code> å‡ºç°ä¹‹å‰ä¸å¯èƒ½å®ç°çš„äº‹æƒ…ï¼Œå³ <code>ä¸»åŠ¨å–æ¶ˆç½‘ç»œè¯·æ±‚</code>ã€‚æµè§ˆå™¨å°†æå‰ç»ˆæ­¢ fetchï¼Œä»è€ŒèŠ‚çœç”¨æˆ·ç½‘ç»œå¸¦å®½ã€‚å½“ç„¶ï¼Œæå‰ç»ˆæ­¢ä¹Ÿä¸å¿…éè¦ç”±ç”¨æˆ·æ‰‹åŠ¨å‘èµ·ã€‚</p>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ <code>controller.signal</code> è¿”å›çš„æ˜¯ <code>AbortSignal</code>ï¼Œå…¶ä»£è¡¨ä¸€ä¸ªä¿¡å·å¯¹è±¡ï¼Œå…¶å…è®¸å¼€å‘è€…ä¸å¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ fetch è¯·æ±‚ï¼‰è¿›è¡Œé€šä¿¡ï¼Œå¹¶åœ¨éœ€è¦æ—¶é€šè¿‡ AbortController å¯¹è±¡ä¸­æ­¢ã€‚</p>
<p>å¦‚æœå¼€å‘è€…æƒ³ä»å¤šä¸ªä¿¡å·ä¸­ä¸­æ­¢ï¼Œå¯ä»¥ä½¿ç”¨ <code>AbortSignal.any()</code> ç»„åˆæˆå•ä¸ªä¿¡å·ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-js">try {
  const controller = new AbortController();
  const timeoutSignal = AbortSignal.timeout(5000);
  const res = await fetch(url, {
    // This will abort the fetch when either signal is aborted
    signal: AbortSignal.any([controller.signal, timeoutSignal]),
  });
  const body = await res.json();
} catch (e) {
  if (e.name === &quot;AbortError&quot;) {
    // Notify the user of abort.
  } else if (e.name === &quot;TimeoutError&quot;) {
    // Notify the user of timeout
  } else {
    // A network error, or some other problem.
    console.log(`Type: ${e.name}, Message: ${e.message}`);
  }
}
</code></pre>
<p>AbortController å’Œ AbortSignal ä¸¤è€…ç”¨é€”è¿˜æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ï¼š</p>
<ul>
<li><code>AbortController</code>ï¼šå…è®¸é€šè¿‡ controller.abort() æ˜¾å¼ä¸­æ­¢å…¶é™„åŠ çš„ä¿¡å·</li>
<li><code>AbortSignal</code> ï¼šä¸èƒ½ç›´æ¥ä¸­æ­¢ï¼Œä½†å¼€å‘è€…å¯ä»¥å°†å…¶ä¼ é€’ç»™ fetch() ä¹‹ç±»çš„è°ƒç”¨æˆ–ç›´æ¥ç›‘å¬å…¶ä¸­æ­¢çŠ¶æ€ã€‚</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨ <code>signal.aborted</code> æ£€æŸ¥å…¶çŠ¶æ€ï¼Œæˆ–ä¸º <code>abort</code> äº‹ä»¶æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œä¾‹å¦‚ï¼šfetch() åœ¨å†…éƒ¨æ‰§è¡Œæ­¤æ“ä½œ ã€‚</p>
<pre><code class="language-js">if (signal.aborted) {}
signal.addEventListener(&#39;abort&#39;, () =&gt; ());
</code></pre>
<p>AbortController å–æ¶ˆè¯·æ±‚åæœåŠ¡å™¨å°±ä¸ä¼šç»§ç»­å¤„ç†è¯¥è¯·æ±‚ï¼Œä¹Ÿä¸ä¼šå‘é€å“åº”ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„æ•°æ®ä¼ è¾“ã€‚åŒæ—¶ï¼Œé’ˆå¯¹å®¢æˆ·ç«¯æ¥è¯´ä¼šå‡å°‘å¹¶å‘çš„è¿æ¥æ•°é‡ï¼Œæé«˜é¡µé¢çš„å“åº”æ€§èƒ½ã€‚</p>
<h2>2.AbortController çš„å…¸å‹ä½¿ç”¨åœºæ™¯</h2>
<h3>2.1 ä¸­æ­¢ WebSocket ç­‰ä¼ ç»Ÿå¯¹è±¡</h3>
<p>å¾ˆå¤šè€ç‰ˆæœ¬çš„ DOM API å…¶å®å¹¶ä¸æ”¯æŒ AbortSignalï¼Œä¾‹å¦‚ï¼šWebSocketï¼Œå…¶åªæœ‰ä¸€ä¸ª <code>.close()</code> æ–¹æ³•ç”¨äºåœ¨è¯·æ±‚å®Œæˆåå…³é—­è¿æ¥ã€‚æ­¤æ—¶ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ˜¾å¼å–æ¶ˆè¯·æ±‚ï¼š</p>
<pre><code class="language-js">function abortableSocket(url, signal) {
  const w = new WebSocket(url);
  if (signal.aborted) {
    w.close();
    // å·²ç»å–æ¶ˆï¼Œç›´æ¥å¤±è´¥
  }
  signal.addEventListener(&quot;abort&quot;, () =&gt; w.close());
  return w;
}
</code></pre>
<p>è¯·æ³¨æ„ï¼Œå¦‚æœå·²ç»ä¸­æ­¢ï¼ŒAbortSignal ä¸ä¼šè§¦å‘å…¶ â€œabortâ€ï¼Œå› æ­¤å¿…é¡»æ£€æŸ¥æ˜¯å¦å·²ç» abortedï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ç«‹å³ .close()ã€‚</p>
<h3>2.2 ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº</h3>
<p>åœ¨é€šè¿‡ removeEventListener ç§»é™¤ DOM äº‹ä»¶å¤„ç†å‡½æ•°æ—¶ï¼Œå¼€å‘è€…å¿…é¡»ä¿è¯ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯åŒä¸€ä¸ªã€‚</p>
<pre><code class="language-js">window.addEventListener(&quot;resize&quot;, () =&gt; doSomething());
// addEventListener å’Œ removeEventListener éåŒä¸€ä¸ªå‡½æ•°
window.removeEventListener(&quot;resize&quot;, () =&gt; doSomething());
</code></pre>
<p>æœ‰äº† AbortController åï¼Œè¿™ä¸€åˆ‡å˜å¾—éå¸¸ç®€å•ï¼Œå¼€å‘è€…åªéœ€è¦å°† signal ä¼ é€’ç»™ addEventListener çš„ç¬¬ä¸‰ä¸ªå‚æ•°å³å¯ã€‚</p>
<pre><code class="language-js">const controller = new AbortController();
const { signal } = controller;
window.addEventListener(&quot;resize&quot;, () =&gt; doSomething(), { signal });
// é€šè¿‡. abort() æ–¹æ³•ç§»é™¤äº‹ä»¶å¤„ç†å‡½æ•°
controller.abort();
</code></pre>
<p>å½“ç„¶ï¼Œé’ˆå¯¹æ—§ç‰ˆæœ¬çš„æµè§ˆå™¨å¯ä»¥å°è¯•æ·»åŠ  Polyfill ä»¥æ”¯æŒ AbortControllerã€‚</p>
<h3>2.3 React hooks ä¸­çš„å¼‚æ­¥ä»»åŠ¡</h3>
<p>åœ¨ React ä¸­ï¼Œå¦‚æœ Effect åœ¨å†æ¬¡è§¦å‘ä¹‹å‰æ²¡æœ‰å®Œæˆï¼Œå¼€å‘è€…ä¸€èˆ¬ä¸å®¹æ˜“å‘ç°ï¼Œæ­¤æ—¶ Effect ä¼šå¹¶è¡Œè¿è¡Œã€‚</p>
<pre><code class="language-js">function FooComponent({something}) {
  useEffect(async () =&gt; {
    const j = await fetch(url + something);
    // do something with J
  }, [something]);
  return &lt;&gt;...&lt;&gt;;
}
</code></pre>
<p>æ­¤æ—¶ï¼Œå¼€å‘è€…å¯ä»¥åšçš„æ˜¯åˆ›å»ºä¸€ä¸ª AbortControllerï¼Œæ¯å½“ä¸‹ä¸€ä¸ª useEffect è°ƒç”¨è¿è¡Œæ—¶å°±ä¸­æ­¢ä¸Šä¸€ä¸ªè¯·æ±‚ï¼š</p>
<pre><code class="language-js">function FooComponent({something}) {
  useEffect(() =&gt; {
    const controller = new AbortController();
    const {signal} = controller;
    const p = (async () =&gt; {
      // çœŸæ­£æ‰§è¡Œçš„é€»è¾‘
      const j = await fetch(url + something, { signal});
      // è¿™é‡Œå¤„ç†è¿”å›å€¼
    })();
    return () =&gt; controller.abort();
  }, [something]);
  return &lt;&gt;...&lt;&gt;;
}
</code></pre>
<h3>2.4 React hooks ä¸­çš„å¼‚æ­¥ä»»åŠ¡</h3>
<p>Node.js é‡Œæ–°ç‰ˆçš„ setTimeout å¯ä»¥ç”¨ AbortController å–æ¶ˆï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="language-js">const { setTimeout: setTimeoutPromise } = require(&quot;node:timers/promises&quot;);
const ac = new AbortController();
const signal = ac.signal;
// ğŸ“¢ è¿™é‡Œä¼ å…¥äº† AbortSignal
setTimeoutPromise(1000, &quot;foobar&quot;, { signal })
  .then(console.log)
  .catch((err) =&gt; {
    if (err.name === &quot;AbortError&quot;) console.log(&quot;The timeout was aborted&quot;);
  });
ac.abort();
</code></pre>
<p>ä¸è¿‡è¿™ä¸ª Promise ç‰ˆçš„ setTimeout å¹¶ä¸ä¼ å…¥å›è°ƒï¼Œå›è°ƒéœ€è¦åœ¨ .then() é‡Œæˆ–è€… await åé¢è‡ªå·±è°ƒç”¨ã€‚</p>
<p>ä½†æ˜¯ï¼Œæµè§ˆå™¨çš„ setTimeout ç›®å‰å¹¶ä¸æ”¯æŒ AbortControllerï¼Œå¯èƒ½æ˜¯åŸå› æ˜¯å…¶å·²ç»è®¾è®¡äº†æ›´å…ˆè¿›çš„ <code>scheduler.postTask() API</code>ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®ä¼˜å…ˆçº§æ·»åŠ è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå› æ­¤ setTimeout æ²¡ç†ç”±å¢å¼ºäº†ã€‚</p>
<pre><code class="language-js">// Declare a TaskController with default priority
const abortTaskController = new TaskController();
// Post task passing the controller&#39;s signal
scheduler
  .postTask(() =&gt; console.log(&quot;Task executing&quot;), {
    signal: abortTaskController.signal,
  })
  .then((taskResult) =&gt; console.log(`${taskResult}`)) //This won&#39;t run!
  .catch((error) =&gt; console.error(&quot;Error:&quot;, error)); // Log the error
// Abort the task
abortTaskController.abort();
</code></pre>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ <code>TaskController</code> æ˜¯ AbortController çš„å­çº§ï¼Œé™¤äº†å¯ä»¥è°ƒç”¨ abort() å–æ¶ˆ taskï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>setPriority()</code> æ–¹æ³•ä¸­é€”ä¿®æ”¹ task çš„ä¼˜å…ˆçº§ï¼Œå¦‚æœä¸éœ€è¦æ§åˆ¶ä¼˜å…ˆçº§ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ AbortControllerã€‚</p>

            </div>
            <div class="article-footer">
                <div class="article-share">
                    <span>åˆ†äº«æ–‡ç« ï¼š</span>
                    <a href="javascript:void(0)" class="share-btn" data-platform="twitter"><i class="fab fa-twitter"></i></a>
                    <a href="javascript:void(0)" class="share-btn" data-platform="facebook"><i class="fab fa-facebook"></i></a>
                    <a href="javascript:void(0)" class="share-btn" data-platform="linkedin"><i class="fab fa-linkedin"></i></a>
                </div>
                <div class="article-actions">
                    <button class="action-btn" id="backToTop"><i class="fas fa-arrow-up"></i> è¿”å›é¡¶éƒ¨</button>
                </div>
            </div>
        </main>

        <!-- å³ä¾§ç›¸å…³æ–‡ç«  - ç®€åŒ–ç‰ˆ -->
        
        
        <!-- ç§»åŠ¨ç«¯ç›®å½•åˆ‡æ¢æŒ‰é’® -->
        <button class="toc-toggle" aria-label="åˆ‡æ¢ç›®å½•">
            <i class="fas fa-chevron-right"></i>
        </button>
    </article>
    <script src="js/prism.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // ç›®å½•åˆ‡æ¢åŠŸèƒ½
        const toc = document.querySelector('.article-toc');
        const tocToggle = document.querySelector('.toc-toggle');
        
        // ä» localStorage è·å–ç›®å½•çŠ¶æ€
        const tocCollapsed = localStorage.getItem('tocCollapsed') === 'true';
        
        // åˆå§‹åŒ–ç›®å½•çŠ¶æ€
        if (tocCollapsed) {
            toc.classList.add('collapsed');
        }
        
        // åˆ‡æ¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        tocToggle.addEventListener('click', () => {
            toc.classList.toggle('collapsed');
            localStorage.setItem('tocCollapsed', toc.classList.contains('collapsed'));
        });
        
        // ç”Ÿæˆç›®å½•
        const content = document.querySelector('.article-content');
        const tocContent = document.querySelector('.toc-content');
        const headings = content.querySelectorAll('h2, h3');
        
        if (headings.length > 0) {
            const tocList = document.createElement('ul');
            
            headings.forEach((heading, index) => {
                // æ·»åŠ é”šç‚¹ID
                const id = `heading-${index}`;
                heading.id = id;
                
                // åˆ›å»ºç›®å½•é¡¹
                const li = document.createElement('li');
                li.className = `toc-${heading.tagName.toLowerCase()}`;
                
                const link = document.createElement('a');
                link.href = `#${id}`;
                link.textContent = heading.textContent;
                
                li.appendChild(link);
                tocList.appendChild(li);
                
                // æ·»åŠ é”šç‚¹é“¾æ¥åˆ°æ ‡é¢˜
                const anchor = document.createElement('a');
                anchor.className = 'heading-anchor';
                anchor.href = `#${id}`;
                anchor.innerHTML = '<i class="fas fa-link"></i>';
                anchor.title = 'å¤åˆ¶é“¾æ¥';
                
                // ç‚¹å‡»é”šç‚¹å¤åˆ¶é“¾æ¥
                anchor.addEventListener('click', (e) => {
                    e.preventDefault();
                    const url = window.location.href.split('#')[0] + '#' + id;
                    navigator.clipboard.writeText(url).then(() => {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'copy-tooltip';
                        tooltip.textContent = 'é“¾æ¥å·²å¤åˆ¶';
                        document.body.appendChild(tooltip);
                        
                        setTimeout(() => {
                            tooltip.classList.add('show');
                        }, 10);
                        
                        setTimeout(() => {
                            tooltip.classList.remove('show');
                            setTimeout(() => {
                                document.body.removeChild(tooltip);
                            }, 300);
                        }, 2000);
                    });
                });
                
                heading.appendChild(anchor);
                
                // ç‚¹å‡»ç›®å½•é¡¹æ—¶åœ¨ç§»åŠ¨ç«¯æ”¶èµ·ç›®å½•
                link.addEventListener('click', (e) => {
                    if (window.innerWidth <= 1280) {
                        toc.classList.add('collapsed');
                        localStorage.setItem('tocCollapsed', 'true');
                    }
                });
            });
            
            tocContent.appendChild(tocList);
        }
        
        // ç›®å½•æ»šåŠ¨é«˜äº®
        const observerOptions = {
            root: null,
            rootMargin: '-100px 0px -66%',
            threshold: [0, 1]
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.id;
                const tocItem = document.querySelector(`.toc-content a[href="#${id}"]`);
                
                if (entry.isIntersecting) {
                    // ç§»é™¤å…¶ä»–é¡¹çš„é«˜äº®
                    document.querySelectorAll('.toc-content a').forEach(item => {
                        item.classList.remove('active');
                    });
                    // æ·»åŠ å½“å‰é¡¹çš„é«˜äº®
                    tocItem?.classList.add('active');
                    
                    // å°†å½“å‰é¡¹æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸ
                    if (tocItem) {
                        const tocContent = document.querySelector('.toc-content');
                        const itemTop = tocItem.offsetTop;
                        const contentHeight = tocContent.clientHeight;
                        const scrollTop = tocContent.scrollTop;
                        
                        if (itemTop < scrollTop || itemTop > scrollTop + contentHeight) {
                            tocContent.scrollTo({
                                top: itemTop - contentHeight / 2,
                                behavior: 'smooth'
                            });
                        }
                    }
                }
            });
        }, observerOptions);
        
        headings.forEach(heading => observer.observe(heading));
        
        // ä»£ç å—å¤åˆ¶åŠŸèƒ½
        const codeBlocks = document.querySelectorAll('pre');
        codeBlocks.forEach((block, index) => {
            const container = block.parentNode;
            if (container.className === 'code-block') {
                const language = block.querySelector('code').className.match(/language-([a-z]+)/)?.[1] || 'code';
                container.setAttribute('data-language', language);
                
                const copyBtn = document.createElement('button');
                copyBtn.className = 'copy-button';
                copyBtn.innerHTML = '<i class="far fa-copy"></i>';
                copyBtn.title = 'å¤åˆ¶ä»£ç ';
                
                copyBtn.addEventListener('click', () => {
                    const code = block.textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        copyBtn.innerHTML = '<i class="fas fa-check"></i>';
                        copyBtn.classList.add('copied');
                        
                        setTimeout(() => {
                            copyBtn.innerHTML = '<i class="far fa-copy"></i>';
                            copyBtn.classList.remove('copied');
                        }, 2000);
                    });
                });
                
                container.appendChild(copyBtn);
            }
        });
        
        // è¿”å›é¡¶éƒ¨æŒ‰é’®
        const backToTopBtn = document.getElementById('backToTop');
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // åˆ†äº«æŒ‰é’®
        const shareButtons = document.querySelectorAll('.share-btn');
        shareButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const platform = btn.getAttribute('data-platform');
                const url = encodeURIComponent(window.location.href);
                const title = encodeURIComponent(document.title);
                
                let shareUrl = '';
                switch (platform) {
                    case 'twitter':
                        shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
                        break;
                    case 'facebook':
                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                        break;
                    case 'linkedin':
                        shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
                        break;
                }
                
                if (shareUrl) {
                    window.open(shareUrl, '_blank', 'width=600,height=400');
                }
            });
        });
        
        // å›¾ç‰‡ç‚¹å‡»æ”¾å¤§
        const images = document.querySelectorAll('.article-content img');
        images.forEach(img => {
            img.addEventListener('click', () => {
                const overlay = document.createElement('div');
                overlay.className = 'image-overlay';
                
                const imgClone = document.createElement('img');
                imgClone.src = img.src;
                imgClone.alt = img.alt;
                
                overlay.appendChild(imgClone);
                document.body.appendChild(overlay);
                
                setTimeout(() => {
                    overlay.classList.add('show');
                }, 10);
                
                overlay.addEventListener('click', () => {
                    overlay.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(overlay);
                    }, 300);
                });
            });
        });
    });
    </script>
</body>
</html>
